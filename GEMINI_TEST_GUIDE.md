# 🧪 Gemini API 테스트 완벽 가이드

## 🎯 목표
Gemini API가 제대로 작동하는지 확인하기

---

## 📋 체크리스트

### ✅ 사전 준비
- [ ] Google AI Studio에서 API 키 받음
- [ ] `.env` 파일에 `EXPO_PUBLIC_GEMINI_API_KEY` 추가
- [ ] `npm install @google/generative-ai` 실행
- [ ] 앱 재시작 (터미널에서 Ctrl+C 후 `npm start`)
- [ ] 브라우저 새로고침 (F5)

---

## 🧪 테스트 Step-by-Step

### Step 1: 브라우저 개발자 도구 열기

1. 브라우저에서 `http://localhost:8081` 접속
2. **F12 키** 누르기
3. **Console 탭** 클릭

### Step 2: 초기화 메시지 확인

콘솔에서 다음 메시지를 찾으세요:

**✅ 성공:**
```
✅ Gemini API 초기화 성공
```

**⚠️ 실패:**
```
⚠️ Gemini API Key가 설정되지 않았습니다.
```

### Step 3: UI에서 버튼 확인

1. **Input 탭** 클릭 (하단 탭바)
2. **음식명** 입력란 확인
3. 오른쪽에 **"AI 적용 🤖"** 버튼이 보이나요?

**✅ 버튼이 보인다:**
- API 키 설정 완료!
- 테스트 진행 가능

**❌ 버튼이 안 보인다:**
- API 키 미설정
- `.env` 파일 확인 필요
- 앱 재시작 필요

### Step 4: AI 기능 실제 테스트

1. **음식명 입력**
   ```
   음식명: 불고기
   ```

2. **"AI 적용 🤖" 버튼 클릭**

3. **콘솔 확인** (F12 → Console)
   ```
   🤖 AI 분석 시작: 불고기
   📥 AI 응답: {"calories": 280, "protein": 25, "carbs": 8, "fat": 15}
   ✅ 영양 정보 분석 완료: {calories: 280, protein: 25, carbs: 8, fat: 15}
   ```

4. **팝업 확인**
   ```
   ✅ AI 분석 완료!
   
   칼로리: 280 kcal
   단백질: 25g
   탄수화물: 8g
   지방: 15g
   
   필요시 수정 후 등록하세요!
   ```

5. **폼 확인**
   - 칼로리: `280` (자동 입력됨!)
   - 단백질: `25` (자동 입력됨!)
   - 탄수화물: `8` (자동 입력됨!)
   - 지방: `15` (자동 입력됨!)

---

## 🎬 테스트 시나리오

### 시나리오 1: 한식 테스트
```
입력: "김치찌개"
예상 결과:
- 칼로리: 150 kcal
- 단백질: 12g
- 탄수화물: 10g
- 지방: 8g
```

### 시나리오 2: 양식 테스트
```
입력: "스테이크"
예상 결과:
- 칼로리: 500-600 kcal
- 단백질: 40-50g
- 탄수화물: 5-10g
- 지방: 30-40g
```

### 시나리오 3: 디저트 테스트
```
입력: "아이스크림"
예상 결과:
- 칼로리: 200-250 kcal
- 단백질: 3-5g
- 탄수화물: 25-30g
- 지방: 10-15g
```

---

## 🔍 문제 해결

### 문제 1: "AI 적용" 버튼이 안 보여요

**원인:**
- API 키가 설정되지 않음

**해결:**
1. `.env` 파일 열기
2. 다음 줄 확인:
   ```env
   EXPO_PUBLIC_GEMINI_API_KEY=AIzaSyD...your-key...xyz
   ```
3. 오타 확인:
   - `EXPO_PUBLIC_GEMINI_API_KEY` (정확히!)
   - `=` 앞뒤 공백 없음
4. 저장 후 터미널에서:
   ```bash
   # Ctrl+C (서버 종료)
   npm start
   ```
5. 브라우저 새로고침 (F5)

---

### 문제 2: "AI 분석 실패" 메시지

**원인:**
- 인터넷 연결 끊김
- API 키가 유효하지 않음
- Rate Limit 초과 (분당 15회)

**해결:**
1. 인터넷 연결 확인
2. API 키 다시 생성:
   - https://aistudio.google.com/app/apikey
   - 새로운 키 만들기
   - `.env` 파일에 붙여넣기
3. 잠시 후 다시 시도 (1분 대기)

---

### 문제 3: 콘솔에 에러 메시지

**에러 예시:**
```
❌ AI 분석 실패: Error: API key not valid
```

**해결:**
1. API 키 확인:
   - Google AI Studio에서 키가 활성화되어 있나요?
   - 키를 정확히 복사했나요?
2. 새 키 생성 후 재시도

---

### 문제 4: 느린 응답 속도

**원인:**
- 네트워크 속도
- Gemini API 서버 응답 시간

**정상 범위:**
- 보통: 2-3초
- 느림: 5-10초
- 매우 느림: 10초 이상 (네트워크 문제)

---

## 📊 예상 결과표

| 음식명 | 칼로리 | 단백질 | 탄수화물 | 지방 |
|--------|--------|--------|----------|------|
| 불고기 | 280 | 25g | 8g | 15g |
| 김치찌개 | 150 | 12g | 10g | 8g |
| 비빔밥 | 450 | 15g | 70g | 12g |
| 치킨 | 450 | 30g | 25g | 25g |
| 피자 | 550 | 20g | 60g | 25g |
| 샐러드 | 150 | 8g | 15g | 8g |
| 바나나 | 100 | 1g | 25g | 0g |

---

## 🎓 고급 테스트

### 콘솔에서 직접 함수 호출

브라우저 콘솔(F12)에서:

```javascript
// Gemini API 함수 직접 호출 (테스트용)
import { getNutritionInfo } from './utils/geminiNutrition';

const result = await getNutritionInfo('불고기');
console.log(result);
// 예상 출력: {calories: 280, protein: 25, carbs: 8, fat: 15}
```

---

## ✅ 테스트 완료 확인

다음을 모두 확인하셨나요?

- [ ] 콘솔에서 "✅ Gemini API 초기화 성공" 메시지 확인
- [ ] Input 탭에서 "AI 적용 🤖" 버튼 확인
- [ ] 음식 이름 입력 후 AI 적용 버튼 클릭
- [ ] 콘솔에서 "🤖 AI 분석 시작" 메시지 확인
- [ ] 콘솔에서 "✅ 영양 정보 분석 완료" 메시지 확인
- [ ] 팝업에서 결과 확인
- [ ] 폼에 값이 자동 입력되는지 확인
- [ ] 다른 음식으로 2-3번 더 테스트

모두 체크되었다면 **테스트 완료!** 🎉

---

## 💡 추가 팁

### 더 정확한 결과를 위해
- ❌ "밥" (너무 일반적)
- ✅ "비빔밥" (구체적)
- ✅ "쇠고기 불고기 150g" (매우 구체적)

### 여러 음식 연속 테스트
- Rate Limit: 분당 15회
- 천천히 테스트하세요!

### API 사용량 확인
- Google AI Studio → Usage
- 월 60회 무료 할당량 확인

---

**테스트 완료 후 실제로 식단 입력에 활용하세요!** 🤖✨
